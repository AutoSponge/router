!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Router=t()}}(function(){var t,e,n;return function r(t,e,n){function i(s,o){if(!e[s]){if(!t[s]){var c="function"==typeof require&&require;if(!o&&c)return c(s,!0);if(u)return u(s,!0);throw new Error("Cannot find module '"+s+"'")}var f=e[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n?n:e)},f,f.exports,r,t,e,n)}return e[s].exports}for(var u="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,n){"use strict";function r(t,e){this.path=t,this.fn=e,this.segments=t.split("/"),this.params=[],this.eventPath=this.getEventPath()}var i=t("./RouteParam");r.prototype={getEventPath:function(){return this.segments.map(this.formatSegment()).join("/")},formatSegment:function(){var t=this;return function(e,n){return":"===e.charAt(0)?(t.params.push(new i(e.substring(1),n)),"_"):"*"===e?"*":e}}},e.exports=r},{"./RouteParam":2}],2:[function(t,e,n){"use strict";function r(t,e){this.position=e,this.name=t}e.exports=r},{}],3:[function(t,e,n){"use strict";function RouterEvent(t){this.path=t,this.current=t.split("/"),this.segments=t.split("/")}e.exports=RouterEvent},{}],4:[function(t,e,n){"use strict";function RouterResponse(t,e){this.event=t,this.params=this.getParams(e),this.splat=this.getSplat(),this.route=e.path,this.fn=e.fn}RouterResponse.prototype={getParams:function(t){return t.params.reduce(this.assignParam(),{})},getSplat:function(){var t=this.event.current.length-1;return"*"===this.event.current[t]?this.event.segments.slice(t).join("/"):""},assignParam:function(){var t=this;return function(e,n){return e[n.name]=t.event.segments[n.position],e}}},e.exports=RouterResponse},{}],5:[function(t,e,n){"use strict";function r(t,e){var n,r;for(n=0,r=t.length;r>n;n+=1)if(e(t[n]))return!0;return!1}function i(t,e){return e[1]&&"_"!==e[1]&&"*"!==e[1]&&t.current.splice(-1,1,"_")}function u(t){for(;t.segments.length>t.current.length;)t.current.push("_");return!0}function s(t,e){return"_"!==e[0]&&"*"===e[1]&&t.current.splice(-2,2,"_","_")&&u(t)}function o(t,e){return"_"===e[1]&&t.current.splice(-1,1,"*")}function c(t,e){return"_"===e[0]&&"*"===e[1]&&t.current.splice(-2,2,"*")}function f(t,e){return function(n){return n(t,e)}}function Router(){var t={};this.addRoute=function(e,n){var r=new a(e,n);t[r.eventPath]=r},this.handleEvent=function(e){var n;return e.path=e.current.join("/"),n=t[e.path],n&&new RouterResponse(e,n)}}var a=t("./Route"),RouterResponse=t("./RouterResponse"),RouterEvent=t("./RouterEvent");Router.create=function(){return new Router},Router.instance=new Router,Router.prototype={match:function(t){var e=t.split?new RouterEvent(t):t;return this.handleEvent(e)||this.reduceSpecificity(e)},reduceSpecificity:function(t){return r([i,s,o,c],f(t,t.current.slice(-2)))&&this.match(t)},addHandler:function(t){var e=this;return function(n){return e.addRoute(n,t)}}},e.exports=Router},{"./Route":1,"./RouterEvent":3,"./RouterResponse":4}]},{},[5])(5)});